# TravelFun 論壇系統技術文件

## 1. 整體架構

TravelFun 論壇系統採用了現代化的前後端分離架構，提供了一個功能完整的互動式討論平台。

### 系統架構

- **前後端分離**：採用 Vue + Vite 前端與 Django 後端分離的架構
- **資料夾結構**：
  - 前端：`src/views/front/Forum/`（主要視圖和組件）
  - 後端：`DjangoAdmin2/forum_system/`（後端模型和 API）

### 資料流向

- 前端通過 RESTful API 向後端請求論壇數據
- 後端處理數據的讀取和寫入操作，並將結果返回給前端
- 用戶交互（如發帖、評論、點讚）通過專用 API 端點實現

### 程式碼組織

- **後端模組化**：使用 Django REST Framework 构建模組化 API
- **前端元件化**：將論壇功能拆分為可重用的 Vue 元件
- **API 分層**：公開 API、用戶 API 和管理 API 明確分離

### 部署架構

- 開發環境：使用 Vite 開發伺服器 + Django 開發伺服器
- 生產環境：支援容器化部署
- 資料存儲：使用關系型資料庫保存論壇數據

## 2. 前端開發工具

### 核心框架與平台

- **Vue 3**：採用 Vue 3 框架作為前端核心
- **Vite**：使用 Vite 作為開發與構建工具
- **TypeScript**：採用 TypeScript 進行開發，提供類型安全

### UI 組件與樣式

- **Naive UI**：使用 Naive UI 組件庫提供表單、彈窗、選擇器等元件
- **Material Icons**：使用 Material 圖標系統
- **自定義論壇元件**：專為討論區設計的自定義元件

### 開發環境工具

- **ESLint**：程式碼風格檢查
- **Prettier**：程式碼格式化工具
- **Chrome DevTools**：前端調試工具

### 包管理與構建工具

- **npm/pnpm**：依賴包管理
- **Vite 構建配置**：自定義的 Vite 構建配置
- **環境變數管理**：使用 `.env` 檔案管理環境變數

## 3. 前端開發技術

### 核心技術

- **Vue 3 Composition API**：使用 `<script setup>` 語法和組合式 API
- **Vue Router**：實現論壇頁面路由和導航
- **TypeScript**：提供靜態類型檢查，增強代碼可維護性
- **響應式設計**：適配不同設備的論壇界面

### 狀態管理與數據處理

- **Pinia**：用戶狀態管理，如登入狀態、權限等
- **Axios**：處理 HTTP 請求，與論壇 API 交互
- **響應式引用**：使用 `ref` 和 `reactive` 管理論壇數據
- **計算屬性**：自動計算派生數據，如評論數量、點讚狀態等

### 用戶界面與體驗

- **文章卡片**：直觀顯示論壇文章信息
- **評論模塊**：嵌套式評論展示與互動
- **分類與標籤**：多維度內容組織與過濾
- **輪播幻燈片**：展示精選論壇文章或公告

### 性能優化

- **懶加載**：論壇文章和評論的分頁載入
- **圖片優化**：用戶頭像和文章圖片的優化處理
- **緩存機制**：本地存儲用戶設置和瀏覽偏好
- **按需加載**：組件和模塊的按需引入

### 互動功能

- **文章點讚**：用戶可對文章點讚表示支持
- **文章收藏**：用戶可收藏感興趣的文章
- **評論發布**：支持添加、刪除評論
- **實時反饋**：操作成功或失敗的及時提示

## 4. 後端開發工具

### 核心框架

- **Django**：使用 Django 框架作為後端核心
- **Django REST Framework**：構建論壇 RESTful API
- **關係型資料庫**：存儲論壇數據的主要載體

### API 與身份驗證

- **Django REST Framework ViewSets**：構建一致的 API 端點
- **JWT 認證**：使用 JSON Web Token 進行身份驗證
- **權限控制**：基於角色的細粒度權限系統

### 資料處理與整合

- **Django ORM**：資料庫對象關係映射
- **序列化器**：數據轉換和驗證
- **信號系統**：處理模型間的數據聯動

### 開發與調試工具

- **Django Debug Toolbar**：開發調試工具
- **Django Extensions**：擴展 Django 功能的工具
- **日誌系統**：記錄系統運行情況和錯誤

### 內容管理

- **Django Admin**：內建的管理後台
- **富文本編輯器**：CKEditor 5 集成
- **媒體文件處理**：圖片上傳和存儲

## 5. 後端開發技術

### 核心技術

- **MVC 架構**：使用 Django 的模型-視圖-控制器模式
- **RESTful API 設計**：遵循 REST 原則設計 API
- **多視圖集**：針對不同用戶角色（公開、用戶、管理員）的視圖集

### 資料模型與資料庫操作

- **Django 模型**：使用 7 個主要模型定義論壇數據結構
  - Category（分類）
  - Post（文章）
  - Comment（評論）
  - SavedPost（收藏）
  - Carousel（輪播）
  - FeaturedArticle（精選文章）
  - Tag（標籤）
- **關係設計**：多對一、多對多關係設計
- **查詢優化**：使用 `select_related` 和 `prefetch_related` 優化查詢

### API 實現與安全性

- **ViewSet 分層**：公開、用戶和管理員視圖集分離
- **序列化器自定義**：針對不同場景的序列化器
- **權限控制**：自定義權限類和裝飾器
- **跨站請求保護**：CSRF 保護機制

### 業務邏輯實現

- **文章操作**：發布、編輯、刪除、點讚
- **評論操作**：添加、刪除評論
- **收藏操作**：添加收藏、移除收藏
- **精選推薦**：管理精選文章和輪播展示

### 性能與可擴展性

- **查詢優化**：減少數據庫查詢次數
- **緩存策略**：使用緩存減少數據庫訪問
- **分頁實現**：大數據集的高效分頁
- **請求限流**：防止 API 濫用的限流機制

## 6. 重點功能

### 論壇核心功能

- **多級分類系統**：支持多個分類，便於內容組織
- **文章發布與管理**：用戶可發布、編輯、刪除自己的文章
- **評論互動系統**：支持文章評論和互動
- **點讚與收藏**：用戶可對文章點讚和收藏

### 內容展示功能

- **首頁輪播圖**：展示精選文章或活動
- **精選文章推薦**：根據管理員設置顯示精選內容
- **熱門文章排行**：顯示最受歡迎的文章
- **產品排名展示**：整合產品推薦功能

### 用戶互動功能

- **用戶個人主頁**：展示用戶發布的文章和評論
- **活躍作者展示**：展示論壇活躍作者
- **用戶貢獻度統計**：記錄和展示用戶活躍度
- **收藏文章管理**：用戶可管理已收藏的文章

### 搜索與過濾

- **全文搜索**：支持文章標題和內容的搜索
- **標籤過濾**：通過標籤快速過濾相關文章
- **時間範圍過濾**：按發布時間過濾文章
- **組合條件查詢**：支持多條件組合查詢

### 管理功能

- **內容審核**：管理員可審核和管理文章
- **用戶管理**：管理用戶權限和狀態
- **數據統計**：論壇活躍度和內容統計
- **輪播和精選管理**：管理首頁展示內容
